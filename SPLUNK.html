<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Manual Busquedas SPLUNK</title>
  <style>
    body { font-family: Arial, sans-serif; background-color: #f4f4f4; padding: 20px; color: #333; }
    h1, h2, h3 { color: #2c3e50; }
    .terminal { background-color: #2d2d2d; color: #00ff00; padding: 15px; border-radius: 5px; font-family: 'Courier New', Courier, monospace; margin: 15px 0; white-space: pre-wrap; }
    .log { background-color: #1e1e1e; color: #cccccc; padding: 15px; border-radius: 5px; font-family: 'Courier New', Courier, monospace; margin: 10px 0; white-space: pre-wrap; }
    nav { margin-bottom: 30px; background-color: #ffffff; padding: 15px; border-radius: 5px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    nav a { margin-right: 15px; text-decoration: none; color: #3498db; }
  </style>
</head>
<body>

<h1>Manual Busquedas SPLUNK</h1>

<h2 id="splunk">1. Splunk</h2>
<h3>1.1 Introducción</h3>
<p>Splunk permite la búsqueda, monitoreo y análisis de grandes volúmenes de datos de máquina en tiempo real mediante búsquedas simples y avanzadas utilizando SPL (Search Processing Language).</p>

<h3>1.2 Fundamentos de Búsqueda</h3>
<div class="terminal">index=web_logs error</div>
<div class="log">_time               | host    | sourcetype      | error_message
2025-04-20 12:34:56 | server1 | access_combined | "404 Not Found"
2025-04-20 12:35:23 | server2 | access_combined | "500 Internal Server Error"</div>
<p>Esta búsqueda retorna eventos que contienen el término <code>error</code> en el índice <code>web_logs</code>.</p>

<h3>1.3 Sintaxis de Búsqueda</h3>
<div class="terminal">index=web_logs status=404 | stats count by host</div>
<div class="log">host    | count
server1 | 150
server2 | 230
server3 | 120</div>
<p>Esta búsqueda cuenta el número de eventos con estado 404 agrupados por host.</p>

<h3>1.4 Índices, Sourcetypes y Hosts</h3>
<div class="terminal">index=web_logs sourcetype=access_combined</div>
<div class="log">_time               | host    | status | url
2025-04-20 12:34:56 | server1 | 200    | "/home"
2025-04-20 12:35:23 | server2 | 404    | "/login"</div>
<p>Filtra eventos del índice <code>web_logs</code> con el sourcetype <code>access_combined</code>.</p>

<h3>1.5 Búsquedas Simples</h3>
<div class="terminal">index=web_logs error</div>
<div class="log">_time               | host    | error_message
2025-04-20 12:34:56 | server1 | "404 Not Found"
2025-04-20 12:35:23 | server3 | "500 Internal Server Error"</div>
<p>Retorna eventos con el término <code>error</code> en cualquier campo.</p>

<h3>1.6 Operadores Booleanos</h3>
<div class="terminal">index=web_logs status=404 OR status=500</div>
<div class="log">_time               | host    | status | url
2025-04-20 12:34:56 | server1 | 404    | "/login"
2025-04-20 12:35:23 | server2 | 500    | "/signup"</div>
<p>Filtra eventos que tienen estado 404 o 500.</p>

<h3>1.7 Uso de Pipes y Comandos</h3>
<div class="terminal">index=web_logs status=404 | stats count by host</div>
<div class="log">host    | count
server1 | 150
server3 | 120</div>
<p>Utiliza pipes (<code>|</code>) para encadenar comandos, primero buscando y luego agrupando resultados.</p>

<h3>1.8 Uso de search, where y fields</h3>
<div class="terminal">index=web_logs | search status=404 | fields host, status</div>
<div class="log">host    | status
server1 | 404
server2 | 404</div>
<p>Filtra resultados usando <code>search</code> y limita las columnas visibles con <code>fields</code>.</p>

<h3>1.9 stats, eventstats y streamstats</h3>
<div class="terminal">index=web_logs | stats count by status</div>
<div class="log">status | count
200    | 1500
404    | 350
500    | 50</div>
<p><b>stats</b> agrega datos como conteos o sumas.</p>

<h2>2 Búsquedas Avanzadas</h2>
<div class="terminal">index=web_logs [search index=error_logs error | fields host]</div>
<div class="log">_time               | host    | status | error_message
2025-04-20 12:34:56 | server1 | 404    | "Page Not Found"
2025-04-20 12:35:23 | server2 | 500    | "Server Error"</div>
<p>Combina resultados de diferentes índices mediante subbúsquedas.</p>

<h3>2.1 Tablas y Visualizaciones</h3>
<div class="terminal">index=web_logs | stats count by host | table host, count</div>
<div class="log">host    | count
server1 | 1500
server2 | 1300
server3 | 1150</div>

<h3>2.2 Agrupaciones (bin, dedup, sort)</h3>
<div class="terminal">index=web_logs | bin _time span=1h | stats count by _time</div>
<div class="log">_time               | count
2025-04-20 00:00:00 | 120
2025-04-20 01:00:00 | 130
2025-04-20 02:00:00 | 140</div>

<h3>2.3 Trabajar con Tiempos</h3>
<div class="terminal">index=web_logs earliest=-7d@d latest=now</div>
<div class="log">_time               | host    | status | url
2025-04-20 12:34:56 | server1 | 200    | "/home"
2025-04-21 12:35:23 | server2 | 404    | "/login"</div>

<h3>2.4 Alertas</h3>
<div class="terminal">index=web_logs status=500 | timechart span=1h count as error_count | where error_count &gt; 50</div>
<div class="log">_time               | error_count
2025-04-20 12:00:00 | 65
2025-04-20 13:00:00 | 75
2025-04-20 14:00:00 | 120</div>

<h3>2.5 Búsquedas Combinadas y Anidadas</h3>
<div class="terminal">index=web_logs [search index=error_logs error | fields host]</div>
<div class="log">_time               | host    | status | error_message
2025-04-20 12:34:56 | server1 | 404    | "Page Not Found"
2025-04-20 12:35:23 | server2 | 500    | "Server Error"</div>

</body>
</html>
